<!DOCTYPE html>
<html>
<head>
    <title>Equipment Create (NEW)</title>
</head>
<script>
    // Function to set the current date as default
    function setCurrentDate() {
        var today = new Date();
        var dd = String(today.getDate()).padStart(2, '0');
        var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
        var yyyy = today.getFullYear();

        today = yyyy + '-' + mm + '-' + dd;
        document.getElementById('createDate').value = today;
    }

    // Call the function when the window loads
    window.onload = setCurrentDate;


    ///////////////////////////////////////////////////////////////////////////

        // Fetch the CSV file
fetch('/RefrigerantTypeLookupData.csv')
  .then(response => response.text())
  .then(csvData => {
    // Parse CSV data
    const rows = csvData.split('\n').slice(1); // Remove header row
    const dropdown = document.getElementById('refrigerantType');

    // Populate dropdown with values from CSV
    rows.forEach(row => {
      const [id, name] = row.split(',');
      const option = document.createElement('option');
      option.value = id;
      option.textContent = name;
      dropdown.appendChild(option);
    });
  })
  .catch(error => console.log('Error fetching the CSV file:', error));

  function updateRefrigerantIdAndTotalCharge() {
    // Get the selected value from the dropdown
    const selectedValue = document.getElementById('refrigerantType').value;
    console.log('Selected value:', selectedValue);
}
    ///////////////////////////////////////////////////////////////////////////
</script>
<body>
    <h1>Equipment Create (NEW, do not edit this page please. In testing.)</h1>
    <form id="equipmentForm" method="post" action="/equipment/equipment_create">  <!--onsubmit="submitForm(event)-->
        <h2>Profile Info (will add this later)</h2>
        <label for="technicianId">Technician ID:</label>
        <input type="text" id="technicianId" name="technicianId" value="TECH-{{tech_id}}" readonly>
        <br>
        <h2>Equipment Details</h2>
        <!-- <label for="equipmentTagId">Equipment Tag ID:</label>
        <input type="text" id="equipmentTagI    d" name="equipmentTagId" value="EQUIP001" readonly>  -->

        <!-- <label for="technicianId">Technician ID:</label>
        <input type="text" id="technicianId" name="technicianId" value="TECH001" readonly> -->

        <label for="createDate">Create Date:</label>
        <input type="date" id="createDate" name="createDate" required>

        <!-- <label for="address">Address:</label>
        <input type="text" id="address" name="address" > -->

        <!-- <label for="organizationId">Store ID:</label>
        <input type="text" id="organizationId" name="organizationId"> -->
        
        <!-------------------------old code-------------------------------------------------->
        <!-- <label for="refrigerantType">Refrigerant Type:</label>
        <select id="refrigerantType" name="refrigerantType" onchange="updateRefrigerantIdAndTotalCharge()" required>
            <option value="" selected disabled>Select refrigerant type</option>
            <option value="R134a">R134a</option>
            <option value="R410a">R410a</option>
            
        </select> -->
        <!--------------------------------------------------------------------------->
     

        <!----------------------------my code----------------------------------------------->
        <label for="refrigerantType">Refrigerant Type:</label>
        <select id="refrigerantType" name="refrigerantType" onchange="updateRefrigerantIdAndTotalCharge()" required>
            <datalist id="refrigerantTypes">
            <option value="" selected disabled>Select refrigerant type</option>
            </datalist>
        </select>

        <!--------------------------------------------------------------------------->
       
        <!-- <label for="refrigerantId">Refrigerant ID (no need for this):</label>
        <input type="text" id="refrigerantId" name="refrigerantId" readonly> -->

        <label for="factoryCharge">Factory Charge (lbs)*:</label required>
        <input type="number" id="factoryCharge" name="factoryCharge">

        <!-- <label for="additionalCharge">Additional Refrigerant Charge (lbs)(no need for this):</label>
        <input type="number" id="additionalCharge" name="additionalCharge"> -->

        <!-- <label for="totalCharge">Total Refrigerant Charge (lbs) (no need for this):</label>
        <input type="number" id="totalCharge" name="totalCharge" readonly> -->

        <label for="manufacturerName">Manufacturer's Name*:</label>
        <input type="text" id="manufacturerName" name="manufacturerName" required>

        <!-- <label for="modelNumber">Model Number:</label>
        <input type="text" id="modelNumber" name="modelNumber"> -->
        <br>
        <label for="serialNumber">Serial Number*:</label>
        <input type="text" id="serialNumber" name="serialNumber" required>

        <label for="equipmentType">Equipment Type(Refrigerator, Freezer, Heat Pump, etc.)*:</label>
        <input type="text" id="equipmentType" name="equipmentType" required>

        <!-- <label for="additionalNotes">Additional Notes:</label>
        <textarea id="additionalNotes" name="additionalNotes" rows="4" cols="50"></textarea> -->

        <button type="submit">Submit</button>
    </form>
</body>
</html>

